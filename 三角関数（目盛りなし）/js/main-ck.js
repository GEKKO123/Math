/**
 * UnitCircle Visualization
 * (c) 2014 Derrick Cohodas
 */function UnitCircle(){function a(e){var t=30,n=2,u="rgba(40,40,40,1)",a=Math.cos(e),f=Math.sin(e),l={inner:{x:(r-t/2)*a,y:(r-t/2)*f},outer:{x:(r+t/2)*a,y:(r+t/2)*f},text:{x:(r+2*t)*a-t/2,y:(r+2*t)*f-t/4},center:{x:r*a,y:r*f}};o.append("line").attr("class","angleMark").attr("x1",l.inner.x).attr("y1",l.inner.y).attr("x2",l.outer.x).attr("y2",l.outer.y).style("fill","none").style("stroke",u).style("stroke-width","3.5px");o.append("circle").attr("class","angleMark").attr("cx",l.center.x).attr("cy",l.center.y).attr("r",15).style("fill","rgba(0,0,0,0)").style("stroke","none");o.append("text").attr("class","angleMark").attr("x",l.text.x).attr("y",l.text.y).attr("transform","matrix(1, 0, 0, -1, "+(l.text.x-1*l.text.x)+", "+(l.text.y- -1*l.text.y)+")").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill",u).text(i[parseFloat(e).toFixed(2)][s])}function l(e){f=e;var t=30,n=2,i="rgba(40,40,40,1)",u=Math.cos(e),a=Math.sin(e),l={x:r*u,y:r*a},c={x:(r+5)*u,y:(r+5)*a};angleDisplay=s==0?parseFloat(e).toFixed(2)+" rad":parseFloat(180/Math.PI*e).toFixed(2)+"°";o.append("text").attr("class","angleSweep").attr("x",230).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(255,0,0,1)").text("θ = "+angleDisplay);o.append("text").attr("class","angleSweep").attr("x",340).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(0,0,0,1)").text("(");o.append("text").attr("class","angleSweep").attr("x",350).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(0,200,0,1)").text(parseFloat(u).toFixed(2));o.append("text").attr("class","angleSweep").attr("x",388).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(0,0,0,1)").text(",");o.append("text").attr("class","angleSweep").attr("x",395).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(0,0,255,1)").text(parseFloat(a).toFixed(2));o.append("text").attr("class","angleSweep").attr("x",435).attr("y",187).attr("transform","matrix(1, 0, 0, -1, 0, 374)").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill","rgba(0,0,0,1)").text(")");o.append("line").attr("class","angleSweep").attr("x1",0).attr("y1",0).attr("x2",l.x).attr("y2",l.y).style("fill","none").style("stroke",i).style("stroke-width","2px");o.append("line").attr("class","angleSweep").attr("x1",0).attr("y1",0).attr("x2",l.x).attr("y2",0).style("fill","none").style("stroke","rgba(0,255,0,1)").style("stroke-width","2px");o.append("line").attr("class","angleSweep").attr("x1",l.x).attr("y1",0).attr("x2",l.x).attr("y2",l.y).style("fill","none").style("stroke","rgba(0,0,255,1)").style("stroke-width","2px").attr("stroke-dasharray","5, 5");if(l.x!==0&&l.y!==0){var h=l.x<0?-Math.floor(r/18):Math.floor(r/18),p=l.y<0?-Math.floor(r/18):Math.floor(r/18);o.append("polyline").attr("class","angleSweep").attr("points",l.x-h+",0 "+(l.x-h)+","+p+" "+l.x+","+p).style("fill","none").style("stroke",i).style("stroke-width","2px")}o.append("circle").attr("class","angleSweep").attr("cx",l.x).attr("cy",l.y).attr("r",5).style("fill",i).style("stroke","none");var d=d3.svg.arc().outerRadius(21).innerRadius(19).startAngle(Math.PI/2).endAngle(e+Math.PI/2);o.append("path").attr("class","angleSweep").attr("d",d).attr("r",20).style("stroke","rgba(255,0,0,1)").style("fill","rgba(255,0,0,1)")}function p(){$(".angleMark").remove();a(0);a(Math.PI/6);a(Math.PI/3);a(Math.PI/4);a(Math.PI/2);a(5*(Math.PI/6));a(2*(Math.PI/3));a(3*(Math.PI/4));a(Math.PI);a(7*(Math.PI/6));a(4*(Math.PI/3));a(5*(Math.PI/4));a(3*Math.PI/2);a(11*(Math.PI/6));a(5*(Math.PI/3));a(7*(Math.PI/4))}var e=d3.select("body"),t=960,n=700,r=160,i={},s=0;$("input[name=labelType]:radio").on("change",function(){s=$(this).val();p();$(".angleSweep").remove();l(f);console.log(s)});i[parseFloat(0).toFixed(2)]=["0 or 2π","0° or 360°","0","1"];i[parseFloat(Math.PI/6).toFixed(2)]=["π/6","30°","1/2","√3/2"];i[parseFloat(Math.PI/4).toFixed(2)]=["π/4","45°","1/√2","1/√2"];i[parseFloat(Math.PI/3).toFixed(2)]=["π/3","60°","√3/2","1/2"];i[parseFloat(Math.PI/2).toFixed(2)]=["π/2","90°","1","0"];i[parseFloat(2*(Math.PI/3)).toFixed(2)]=["2π/3","120°","√3/2","-1/2"];i[parseFloat(3*(Math.PI/4)).toFixed(2)]=["3π/4","135°","1/√2","-1/√2"];i[parseFloat(5*(Math.PI/6)).toFixed(2)]=["5π/6","150°","1/2","-√3/2"];i[parseFloat(Math.PI).toFixed(2)]=["π","180°","0","1"];i[parseFloat(7*(Math.PI/6)).toFixed(2)]=["7π/6","210°","-1/2","-√3/2"];i[parseFloat(5*(Math.PI/4)).toFixed(2)]=["5π/4","225°","-1/√2","-1/√2"];i[parseFloat(4*(Math.PI/3)).toFixed(2)]=["4π/3","240°","-√3/2","-1/2"];i[parseFloat(3*(Math.PI/2)).toFixed(2)]=["3π/2","270°","-1","0"];i[parseFloat(5*(Math.PI/3)).toFixed(2)]=["5π/3","300°","-√3/2","1/2"];i[parseFloat(7*(Math.PI/4)).toFixed(2)]=["7π/4","315°","-1/√2","1/√2"];i[parseFloat(11*(Math.PI/6)).toFixed(2)]=["11π/6","330°","-1/2","√3/2"];var o=e.append("svg").attr("width",t).attr("height",n).append("g").attr("transform","translate("+t/3+","+n/3+") scale(1, -1)").on("mousedown",function(){console.log(d3.mouse(this))}),u="rgba(100,100,100,1)";o.append("line").attr("class","y").attr("y1",-(r+30)).attr("y2",r+30).style("fill","none").style("stroke",u).style("stroke-width","2px");o.append("line").attr("class","x").attr("x1",-(r+30)).attr("x2",r+30).style("fill","none").style("stroke",u).style("stroke-width","2px");o.append("polygon").attr("class","ynArrow").attr("points","0,"+(r+40)+" 5,"+(r+30)+" -5,"+(r+30)).style("fill",u);o.append("polygon").attr("class","ypArrow").attr("points","0,"+ -(r+40)+" 5,"+ -(r+30)+" -5,"+ -(r+30)).style("fill",u);o.append("polygon").attr("class","xnArrow").attr("points",-(r+40)+",0 "+ -(r+30)+",5 "+ -(r+30)+",-5").style("fill",u);o.append("polygon").attr("class","xpArrow").attr("points",r+40+",0 "+(r+30)+",5 "+(r+30)+",-5").style("fill",u);o.append("circle").attr("class","center").attr("r","5px").style("fill","rgba(40, 40, 40, 1.0)");o.append("circle").attr("class","uc").attr("r",r).style("fill","rgba(0,0,0,0)").style("stroke","rgba(40, 40, 40, 1)").style("stroke-width","4px");var f=1.23;l(f);var c=0,h=function(e){var t=d3.mouse(e);if(t[0]===0||t[1]===0)return;var n=Math.atan(t[1]/t[0]);n+=n<0?Math.PI/2:0;if(t[0]>=0&&t[1]>=0)angleToMouse=n;else if(t[0]<=0&&t[1]>=0)angleToMouse=n+Math.PI/2;else if(t[0]<=0&&t[1]<=0)angleToMouse=n+Math.PI;else{if(!(t[0]>=0&&t[1]<=0))return;angleToMouse=n+3*(Math.PI/2)}console.log(angleToMouse);$(".angleSweep").remove();l(angleToMouse);c=1;setTimeout(function(){c=0},10)};o.on("mousemove",function(){c||h(this)});p()}(function(e){uc=new UnitCircle})(jQuery);